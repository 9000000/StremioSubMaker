# SubMaker - Stremio Subtitle Translator
# Environment Configuration

# ======================
# Server Configuration
# ======================

# OpenSubtitles Developer API Key
OPENSUBTITLES_API_KEY=

# Port to run the server on
PORT=7001

# Node environment (development or production)
NODE_ENV=production

# ======================
# Session Management
# ======================

# Session store is unbounded by count by default.
# To enforce a cap, set MAX_SESSIONS to a positive integer.
# Example:
# MAX_SESSIONS=1000

# Session expiration time in milliseconds (sliding expiration - resets on each use)
# Default: 7776000000 (90 days / 3 months)
# Sessions only expire after this period of complete inactivity
SESSION_MAX_AGE=7776000000

# Auto-save interval for session persistence (in milliseconds)
# How often to save sessions to disk
# Default: 300000 (5 minutes)
SESSION_SAVE_INTERVAL=300000

# Path to store session data on disk
# Sessions are saved here and reloaded on server restart
# Default: ./data/sessions.json
SESSION_PERSISTENCE_PATH=./data/sessions.json

# ======================
# Security Configuration
# ======================

# Force session-based authentication even on localhost
# Set to 'true' to disable base64 encoding on localhost (for testing production behavior)
# Default: not set (allows base64 on localhost for development convenience)
# FORCE_SESSIONS=true

# Allow base64-encoded configs in production (NOT RECOMMENDED)
# Only enable this if you need backward compatibility
# Default: not set (base64 configs disabled in production)
# ALLOW_BASE64_CONFIG=true

# ======================
# Production Deployment
# ======================

# For VPS deployment, set these:
# NODE_ENV=production
# PORT=7001
# SESSION_MAX_AGE=7776000000

# Make sure your reverse proxy (nginx/apache) passes these headers:
# - X-Forwarded-Proto (for HTTPS detection)
# - X-Forwarded-For (for rate limiting)

# ======================
# Logging Configuration
# ======================

# Control console logging verbosity via LOG_LEVEL
# Levels: 'debug' (all logs), 'warn' (warnings + errors only), 'error' (errors only)
# Default: 'debug' (development mode)
# For production, set to 'error' to show only errors
# LOG_LEVEL=error

# Write logs to file (enabled by default in production)
# Set to 'false' to disable file logging even in production
# Default: true in production, false in development
# LOG_TO_FILE=true

# Directory for log files (default: ./logs)
# LOG_DIR=./logs

# Log file name (default: app.log)
# LOG_BASENAME=app.log

# Maximum size of a single log file in MB (default: 10)
# LOG_MAX_SIZE_MB=10

# Maximum number of archived log files to keep (default: 100)
# LOG_MAX_FILES=100

# Maximum age of log files in days before auto-deletion (default: 14)
# LOG_MAX_AGE_DAYS=14

# ======================
# Development/Testing
# ======================

# For local development, you can use defaults:
# NODE_ENV=development
# PORT=7001

# To test production session behavior on localhost:
# FORCE_SESSIONS=true

# To test production logging behavior on localhost (only errors):
# LOG_LEVEL=error
